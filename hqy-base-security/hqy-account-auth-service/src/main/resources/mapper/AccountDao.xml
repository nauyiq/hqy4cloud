<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.hqy.account.dao.AccountDao">


    <select id="queryAccountByUsernameOrEmail" resultType="com.hqy.account.entity.Account">
        SELECT
            id,
            password,
            username,
            email,
            phone,
            roles,
            status
        from t_account
        WHERE username = #{usernameOrEmail} or email = #{usernameOrEmail}
    </select>

    <select id="getAccountInfo" resultType="com.hqy.account.dto.AccountInfoDTO">
        SELECT
        a.id,a.username,a.email,a.phone,a.roles,a.status,
        p.avatar,p.nickname,p.intro,p.birthday
        FROM t_account a
        LEFT JOIN t_account_profile p
        ON a.id = p.id
        WHERE a.id = #{id}
    </select>


    <select id="getAccountInfos" resultType="com.hqy.account.dto.AccountInfoDTO">
        SELECT
        a.id,a.username,a.email,a.phone,a.roles,a.status,
        p.avatar,p.nickname,p.intro,p.birthday
        FROM t_account a
        LEFT JOIN t_account_profile p
        ON a.id = p.id
        WHERE a.id in
        <foreach collection="ids" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
    </select>

</mapper>